!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@babel/runtime-corejs3/helpers/defineProperty"),require("@babel/runtime-corejs3/helpers/classPrivateFieldSet"),require("@babel/runtime-corejs3/helpers/classPrivateFieldGet"),require("@babel/runtime-corejs3/core-js-stable/array/is-array"),require("@babel/runtime-corejs3/core-js-stable/object/keys"),require("@babel/runtime-corejs3/core-js-stable/instance/map"),require("@babel/runtime-corejs3/core-js-stable/promise"),require("@babel/runtime-corejs3/core-js-stable/set-timeout"),require("@babel/runtime-corejs3/core-js-stable/instance/reduce"),require("@babel/runtime-corejs3/core-js-stable/instance/concat"),require("@babel/runtime-corejs3/core-js-stable/object/entries"),require("@babel/runtime-corejs3/core-js-stable/weak-map"),require("@babel/runtime-corejs3/core-js-stable/weak-set"),require("@babel/runtime-corejs3/core-js-stable/instance/for-each"),require("neo4j-driver"),require("neo4j-driver-core"),require("vis-network/standalone"),require("deepmerge"),require("@babel/runtime-corejs3/core-js-stable/symbol")):"function"==typeof define&&define.amd?define(["@babel/runtime-corejs3/helpers/defineProperty","@babel/runtime-corejs3/helpers/classPrivateFieldSet","@babel/runtime-corejs3/helpers/classPrivateFieldGet","@babel/runtime-corejs3/core-js-stable/array/is-array","@babel/runtime-corejs3/core-js-stable/object/keys","@babel/runtime-corejs3/core-js-stable/instance/map","@babel/runtime-corejs3/core-js-stable/promise","@babel/runtime-corejs3/core-js-stable/set-timeout","@babel/runtime-corejs3/core-js-stable/instance/reduce","@babel/runtime-corejs3/core-js-stable/instance/concat","@babel/runtime-corejs3/core-js-stable/object/entries","@babel/runtime-corejs3/core-js-stable/weak-map","@babel/runtime-corejs3/core-js-stable/weak-set","@babel/runtime-corejs3/core-js-stable/instance/for-each","neo4j-driver","neo4j-driver-core","vis-network/standalone","deepmerge","@babel/runtime-corejs3/core-js-stable/symbol"],t):"object"==typeof exports?exports.NeoVis=t(require("@babel/runtime-corejs3/helpers/defineProperty"),require("@babel/runtime-corejs3/helpers/classPrivateFieldSet"),require("@babel/runtime-corejs3/helpers/classPrivateFieldGet"),require("@babel/runtime-corejs3/core-js-stable/array/is-array"),require("@babel/runtime-corejs3/core-js-stable/object/keys"),require("@babel/runtime-corejs3/core-js-stable/instance/map"),require("@babel/runtime-corejs3/core-js-stable/promise"),require("@babel/runtime-corejs3/core-js-stable/set-timeout"),require("@babel/runtime-corejs3/core-js-stable/instance/reduce"),require("@babel/runtime-corejs3/core-js-stable/instance/concat"),require("@babel/runtime-corejs3/core-js-stable/object/entries"),require("@babel/runtime-corejs3/core-js-stable/weak-map"),require("@babel/runtime-corejs3/core-js-stable/weak-set"),require("@babel/runtime-corejs3/core-js-stable/instance/for-each"),require("neo4j-driver"),require("neo4j-driver-core"),require("vis-network/standalone"),require("deepmerge"),require("@babel/runtime-corejs3/core-js-stable/symbol")):e.NeoVis=t(e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0])}(self,((e,t,r,s,i,o,n,a,l,c,h,d,u,b,p,f,j,v,m)=>(()=>{"use strict";var g={852:e=>{e.exports=s},848:e=>{e.exports=c},349:e=>{e.exports=b},820:e=>{e.exports=o},83:e=>{e.exports=l},209:e=>{e.exports=h},995:e=>{e.exports=i},723:e=>{e.exports=n},519:e=>{e.exports=a},581:e=>{e.exports=m},317:e=>{e.exports=d},483:e=>{e.exports=u},779:e=>{e.exports=r},642:e=>{e.exports=t},783:t=>{t.exports=e},613:e=>{e.exports=v},949:e=>{e.exports=p},55:e=>{e.exports=f},365:e=>{e.exports=j}},w={};function y(e){var t=w[e];if(void 0!==t)return t.exports;var r=w[e]={exports:{}};return g[e](r,r.exports,y),r.exports}y.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return y.d(t,{a:t}),t},y.d=(e,t)=>{for(var r in t)y.o(t,r)&&!y.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},y.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),y.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var E={};return(()=>{y.r(E),y.d(E,{EventController:()=>P,NEOVIS_ADVANCED_CONFIG:()=>H,NEOVIS_DEFAULT_CONFIG:()=>M,NeoVis:()=>je,NeoVisEvents:()=>D,default:()=>xe,migrateFromOldConfig:()=>ke,objectToTitleHtml:()=>Q,objectToTitleString:()=>Y});var e=y(783),t=y.n(e),r=y(642),s=y.n(r),i=y(779),o=y.n(i),n=y(852),a=y.n(n),l=y(995),c=y.n(l),h=y(820),d=y.n(h),u=y(723),b=y.n(u),p=y(519),f=y.n(p),j=y(83),v=y.n(j),m=y(848),g=y.n(m),w=y(209),C=y.n(w),N=y(317),q=y.n(N),I=y(483),_=y.n(I),k=y(349),x=y.n(k),A=y(949),T=y.n(A),S=y(55),O=y(365);const F={neo4j:{initialQuery:"MATCH (n) WHERE exists(n.pagerank)\n                        WITH (n), RAND() AS random\n                        ORDER BY random LIMIT 3000\n                        OPTIONAL MATCH (n)-[r]-(m)\n                        //WITH n,r,m WHERE exists(n.pagerank) AND exists(m.pagerank) AND exists(m.community)\n                        RETURN n, r, m;",neo4jUri:"bolt://localhost:7687",neo4jUser:"neo4j",neo4jPassword:"neo4j",driverConfig:{encrypted:"ENCRYPTION_OFF",trust:"TRUST_ALL_CERTIFICATES",maxConnectionPoolSize:100,connectionAcquisitionTimeout:1e4,disableLosslessIntegers:!0},groupAsLabel:!0},visJs:{nodes:{font:{size:26,strokeWidth:7},scaling:{}},edges:{arrows:{to:{enabled:!1}},length:200},layout:{improvedLayout:!1,hierarchical:{enabled:!1,sortMethod:"hubsize"}},physics:{adaptiveTimestep:!0,stabilization:{iterations:200,fit:!0}}}};let D=function(e){return e.CompletionEvent="completed",e.ClickNodeEvent="clickNode",e.ClickEdgeEvent="clickEdge",e.ErrorEvent="error",e}({});class P{constructor(){t()(this,"_handlers",void 0),this._handlers={[D.CompletionEvent]:[],[D.ErrorEvent]:[],[D.ClickNodeEvent]:[],[D.ClickEdgeEvent]:[]}}register(e,t){if(void 0===this._handlers[e])throw new Error("Unknown event: "+e);this._handlers[e].push(t)}generateEvent(e,t){if(void 0===this._handlers[e])throw new Error("Unknown event: "+e);for(const r of this._handlers[e])r(t)}}var L=y(613),R=y.n(L),U=y(581),V=y.n(U);const M=V()(),H=V()();function z(e,t){W(e,t),t.add(e)}function G(e,t,r){W(e,t),t.set(e,r)}function W(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function B(e,t){if(a()(t)&&t.length>1){let r=`<strong>${e}:</strong><br /><ul>`;for(const e of t)r+=`<li>${e}</li>`;return r+"</ul>"}return`<strong>${e}:</strong> ${t}<br>`}function J(e,t){if("object"==typeof t?.properties)return(0,S.isInt)(t.properties[e])?t.properties[e].toInt():t.properties[e];throw new Error("Neo4j object is not properly constructed")}function Q(e,t){let r="";t||(t=c()(e.properties));for(const s of t){const t=J(s,e);t&&(r+=B(s,t))}const s=document.createElement("div");return s.innerHTML=r,s}function Y(e,t){let r="";t||(t=c()(e.properties));for(const s of t){const t=J(s,e);t&&(r+=`${s}: ${t}\n`)}return r}var K=new(q()),X=new(q()),Z=new(q()),ee=new(q()),te=new(q()),re=new(q()),se=new(q()),ie=new(q()),oe=new(_()),ne=new(_()),ae=new(_()),le=new(_()),ce=new(_()),he=new(_()),de=new(_()),ue=new(_()),be=new(_()),pe=new(_()),fe=new(_());class je{get nodes(){return o()(this,K).nodes}get edges(){return o()(this,K).edges}get _config(){return o()(this,ee)}get network(){return o()(this,X)}constructor(e){z(this,fe),z(this,pe),z(this,be),z(this,ue),z(this,de),z(this,he),z(this,ce),z(this,le),z(this,ae),z(this,ne),z(this,oe),G(this,K,{writable:!0,value:{nodes:new O.DataSet,edges:new O.DataSet}}),G(this,X,{writable:!0,value:null}),G(this,Z,{writable:!0,value:new P}),G(this,ee,{writable:!0,value:void 0}),G(this,te,{writable:!0,value:void 0}),G(this,re,{writable:!0,value:void 0}),G(this,se,{writable:!0,value:void 0}),G(this,ie,{writable:!0,value:void 0}),$(this,ne,me).call(this,e),$(this,oe,ve).call(this,e),$(this,oe,ve).call(this,F)}render(e){let t=0;const r=e||o()(this,se),i=o()(this,te).session(o()(this,re)?{database:o()(this,re)}:void 0),n=[];i.run(r,{limit:30}).subscribe({onNext:e=>{t++,$(this,oe,ve).call(this,"CLASS NAME"),$(this,oe,ve).call(this,e?.constructor.name),$(this,oe,ve).call(this,e);const r=d()(e).call(e,(async e=>{if($(this,oe,ve).call(this,"Constructor:"),$(this,oe,ve).call(this,e?.constructor.name),(0,S.isNode)(e)){const t=await $(this,pe,Ie).call(this,e);try{o()(this,K).nodes.update(t)}catch(e){$(this,oe,ve).call(this,e,"error")}}else if((0,S.isRelationship)(e)){const t=await $(this,fe,_e).call(this,e);o()(this,K).edges.update(t)}else if((0,S.isPath)(e)){$(this,oe,ve).call(this,"PATH"),$(this,oe,ve).call(this,e);const t=await $(this,pe,Ie).call(this,e.start),r=await $(this,pe,Ie).call(this,e.end);o()(this,K).nodes.update(t),o()(this,K).nodes.update(r);for(const t of e.segments)o()(this,K).nodes.update(await $(this,pe,Ie).call(this,t.start)),o()(this,K).nodes.update(await $(this,pe,Ie).call(this,t.end)),o()(this,K).edges.update(await $(this,fe,_e).call(this,t.relationship))}else if(a()(e))for(const t of e)if($(this,oe,ve).call(this,"Array element constructor:"),$(this,oe,ve).call(this,t?.constructor.name),(0,S.isNode)(t)){const e=await $(this,pe,Ie).call(this,t);o()(this,K).nodes.update(e)}else if((0,S.isRelationship)(t)){const e=await $(this,fe,_e).call(this,t);o()(this,K).edges.update(e)}}));n.push(b().all(r))},onCompleted:async()=>{if(await b().all(n),await i.close(),!o()(this,X)){const e=R()(F.visJs,o()(this,ee).visConfig??{}),t=o()(this,ie);$(this,oe,ve).call(this,o()(this,K).nodes),$(this,oe,ve).call(this,o()(this,K).edges),s()(this,X,new O.Network(t,o()(this,K),e))}$(this,oe,ve).call(this,"completed"),f()((()=>{o()(this,X).stopSimulation()}),1e4),o()(this,Z).generateEvent(D.CompletionEvent,{recordCount:t});const e=this;o()(this,X).on("click",(function(t){if(t.nodes.length>0){const r=this.getNodeAt(t.pointer.DOM);o()(e,Z).generateEvent(D.ClickNodeEvent,{nodeId:r,node:o()(e,K).nodes.get(r)})}else if(t.edges.length>0){const r=this.getEdgeAt(t.pointer.DOM);o()(e,Z).generateEvent(D.ClickEdgeEvent,{edgeId:r,edge:o()(e,K).edges.get(r)})}}))},onError:e=>{$(this,oe,ve).call(this,e,"error"),o()(this,Z).generateEvent(D.ErrorEvent,{error:e})}})}clearNetwork(){o()(this,K).nodes.clear(),o()(this,K).edges.clear()}registerOnEvent(e,t){o()(this,Z).register(e,t)}reinit(e){$(this,ne,me).call(this,e),this.render()}reload(){this.clearNetwork(),this.render()}stabilize(){o()(this,X).stopSimulation(),$(this,oe,ve).call(this,"Calling stopSimulation")}renderWithCypher(e){this.clearNetwork(),s()(this,se,e),this.render()}updateWithCypher(e){this.render(e)}}function ve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";("log"!==t||o()(this,ee).consoleDebug)&&console[t](e)}function me(e){let t,r;if(e.nonFlat&&e.defaultLabelConfig){if(t=e.defaultLabelConfig,t[H])throw new Error("non flat config can't use NEOVIS_ADVANCED_CONFIG, read the doc to see how the config should look");if(r=e.defaultRelationshipsConfig,r[H])throw new Error("non flat config can't use NEOVIS_ADVANCED_CONFIG, read the doc to see how the config should look")}else t=e.labels?.[M],r=e.relationships?.[M];if(t)for(const r of c()(e.labels))e=e.nonFlat?{...e,labels:{...e.labels,[r]:R()(t,e.labels?.[r])}}:{...e,labels:{...e.labels,[r]:{...R()(t,e.labels?.[r]),[H]:R()(t[H]??{},(e.labels?.[r])[H]??{})}}};if(r)for(const t of c()(e.relationships))e=e.nonFlat?{...e,relationships:{...e.relationships,[t]:R()(r,e.relationships?.[t])}}:{...e,relationships:{...e.relationships,[t]:{...R()(r,e.relationships?.[t]),[H]:R()(r[H]??{},(e.relationships?.[t])[H]??{})}}};s()(this,ee,e),s()(this,te,e.neo4j instanceof T().driver?e.neo4j:T().driver(e.neo4j?.serverUrl??F.neo4j.neo4jUri,T().auth.basic(e.neo4j?.serverUser??F.neo4j.neo4jUser,e.neo4j?.serverPassword??F.neo4j.neo4jPassword),R()(F.neo4j.driverConfig,e.neo4j?.driverConfig??{}))),s()(this,re,e.serverDatabase),s()(this,se,e.initialCypher??F.neo4j.initialQuery),s()(this,ie,document.getElementById(e.containerId)),o()(this,ee).groupAsLabel=e.groupAsLabel??F.neo4j.groupAsLabel}async function ge(e,t){const r=o()(this,te).session(o()(this,re)&&{database:o()(this,re)}),s=[];try{const i=await r.readTransaction((r=>r.run(e,{id:t})));for(const e of i.records)x()(e).call(e,(e=>{s.push(e)}))}finally{await r.close()}if(0!==s.length)return 1===s.length?s.pop():s}function we(e,t){if("function"==typeof e)return e(t);throw new Error("Function type property field must be a function")}function ye(e,t){if(e&&"object"==typeof e)for(const r of c()(e)){const s=e[r];s&&"object"==typeof s?(t[r]||(t[r]={}),$(this,ce,ye).call(this,s,t[r])):t[r]=s}}function Ee(e,t,r){if(e&&"object"==typeof e)for(const s of c()(e)){const i=e[s];if("object"==typeof i)t[s]||(t[s]={}),$(this,he,Ee).call(this,i,t[s],r);else{const i=e[s];t[s]=J(i,r)}}}function*Ce(e,t,r){if(e&&"object"==typeof e)for(const s of c()(e)){const i=e[s];if(i&&"object"==typeof i)t[s]||(t[s]={}),yield*$(this,de,Ce).call(this,i,t[s],r);else{const e=$(this,ae,ge).call(this,i,r);yield b().resolve(e).then((e=>{t[s]=e}))}}}function*Ne(e,t,r){if(e&&"object"==typeof e)for(const s of c()(e)){const i=e[s];if(i&&"object"==typeof i)t[s]||(t[s]={}),yield*$(this,ue,Ne).call(this,i,t[s],r);else{const e=$(this,le,we).call(this,i,r);yield b().resolve(e).then((e=>{t[s]=e}))}}}async function qe(e,t,r,s){if(!e)return;let i,n,a,l;if(o()(this,ee).nonFlat){if(void 0!==e[H])throw new Error("Advanced config and non flat config should not be together");i=e.static,n=e.cypher,a=e.property,l=e.function}else{const t=e[H];if(a=e,void 0!==t&&"object"!=typeof t)throw new Error("Advanced config should be an object. See documentation for details.");n=t?.cypher,i=t?.static,l=t?.function}$(this,he,Ee).call(this,a,t,r),$(this,ce,ye).call(this,i,t),await b().all($(this,de,Ce).call(this,n,t,s)),await b().all($(this,ue,Ne).call(this,l,t,r))}async function Ie(e){const t={},r=e.labels[0],s=o()(this,ee)?.labels?.[r]??o()(this,ee)?.defaultLabelConfig??o()(this,ee)?.labels?.[M];return t.id=(0,S.isInt)(e.identity)?e.identity.toInt():e.identity,t.raw=e,o()(this,ee).groupAsLabel&&(t.group=r),await $(this,be,qe).call(this,s,t,e,t.id),t}async function _e(e){const t=o()(this,ee)?.relationships?.[e.type]??o()(this,ee).defaultRelationshipsConfig??o()(this,ee)?.relationships?.[M],r={};return r.id=(0,S.isInt)(e.identity)?e.identity.toInt():e.identity,r.from=(0,S.isInt)(e.start)?e.start.toInt():e.start,r.to=(0,S.isInt)(e.end)?e.end.toInt():e.end,r.raw=e,await $(this,be,qe).call(this,t,r,e,r.id),r}function ke(e){var t,r,s,i;return{containerId:e.container_id,initialCypher:e.initial_cypher,consoleDebug:e.console_debug,serverDatabase:e.server_database,neo4j:{serverUrl:e.server_url,serverUser:e.server_user,serverPassword:e.server_password,driverConfig:e.encrypted||e.trust?{encrypted:e.encrypted,trust:e.trust}:void 0},visConfig:e.arrows||e.hierarchical?{edges:e.arrows?{arrows:{to:{enabled:e.arrows}}}:void 0,layout:e.hierarchical?{enabled:e.hierarchical,sortMethod:e.hierarchical_sort_method}:void 0}:void 0,labels:e.labels?v()(t=g()(r=C()(e.labels)).call(r,e.labels?.[M]?[[M,e.labels[M]]]:[])).call(t,((e,t)=>{let[r,s]=t;return e[r]={label:"function"!=typeof s.caption?s.caption:void 0,value:s.size,group:s.community,[H]:{cypher:s.sizeCypher?{value:s.sizeCypher}:void 0,function:R()({title:e=>Q(e,s.title_properties)},"function"==typeof s.caption?{label:s.caption}:{}),static:{font:s.font,shape:s.image?"image":"dot",image:s.image}}},e}),{}):void 0,relationships:e.relationships?v()(s=g()(i=C()(e.relationships)).call(i,e.relationships[M]?[[M,e.relationships[M]]]:[])).call(s,((e,t)=>{let[r,s]=t;return e[r]={value:s.thickness,label:"string"==typeof s.caption?s.caption:void 0,[H]:{function:{title:Q}}},e}),{}):void 0}}t()(je,"NEOVIS_DEFAULT_CONFIG",M),t()(je,"NEOVIS_ADVANCED_CONFIG",H),t()(je,"objectToTitleHtml",Q),t()(je,"objectToTitleString",Y);const xe=je})(),E})()));
//# sourceMappingURL=neovis-without-dependencies.js.map